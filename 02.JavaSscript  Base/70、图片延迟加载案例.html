<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图片延迟加载：图片距离顶部距离小于视口高度 </title>
    <style>
        .wrapper {
            display: flex;
            flex-wrap: wrap;
            width: 1100px;
            margin: 20px auto;
        }

        .wrapper img {
            width: 200px;
            height: 190px;
            margin: 20px;
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
        <img data-src="../01.HTML&CSS/picture/1.png" alt="" data-srcset="">
    </div>
    <script>
        (function () {
            //（1）获取所有图片
            var imgItems = document.querySelectorAll('.wrapper img');
            //加载首屏图片
            loadImg();
            //（2）监听页面发生滚动
            window.onscroll = loadImg;

            function loadImg() {
                //🔺（3）关键分析点：图片与视口顶部距离<视口高度时，图片显示
                //（4）遍历所有图片
                //优化：只需要遍历那些都没加载过的图片即可！！可以通过item.src来判断

                imgItems.forEach(function (item) {
                    //🔺🔺判断本图片与视口顶部的距离（item.getBoundingClientRect().top） < 视口高度（document.documentElement.clientHeight）：显示
                    if (item.getBoundingClientRect().top < document.documentElement.clientHeight && !item.src) {
                        //给图片设置src属性（使用自定义属性data-xxxx）
                        item.src = item.dataset.src
                    }
                });
            };
        })();
    </script>
</body>

</html>